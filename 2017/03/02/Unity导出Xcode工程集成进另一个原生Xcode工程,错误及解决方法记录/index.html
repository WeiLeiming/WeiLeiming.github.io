<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />



  <meta name="google-site-verification" content="xrV3Blr-aJ8ys4XksZDm4TxN1UPIHQtA_bGfkPS4abw" />













  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="iOS,Unity," />





  <link rel="alternate" href="/atom.xml" title="雷鸣的博客" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="最后更新时间：2018.4.18 最近在研究Unity导出的Xcode工程如何集成在现有工程中。现将过程中遇见的问题整理如下。">
<meta name="keywords" content="iOS,Unity">
<meta property="og:type" content="article">
<meta property="og:title" content="Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录">
<meta property="og:url" content="http://willwei.me/2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/index.html">
<meta property="og:site_name" content="雷鸣的博客">
<meta property="og:description" content="最后更新时间：2018.4.18 最近在研究Unity导出的Xcode工程如何集成在现有工程中。现将过程中遇见的问题整理如下。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fd8c4lh1l8j30mv01dt96.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/006tKfTcly1ff1c19i81gj30n2014t93.jpg">
<meta property="og:image" content="http://ww4.sinaimg.cn/large/006tKfTcly1ff1bzgczroj30o40afta7.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgmwn9tqhj305c06ljrq.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdgmyx5urlj30gu06pjs1.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdgogg7fsij30l80cw752.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgoft719rj30l80cwaau.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fdgoxk1oncj30nj0daabs.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fdgp5v2yb8j30jj0660th.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/006tNc79ly1fdgphvrzdij30jj067mxq.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fdgplwi962j30j30670t2.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpqzi4a9j30jj067dg5.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpsr63j4j30eq00ldfq.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgptuhwqkj30e700ngli.jpg">
<meta property="og:image" content="https://ww1.sinaimg.cn/large/006tNc79ly1fdgpuvg8h4j30j000pmx5.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpvqt66yj30c200m0sl.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpypkbzrj30fy01vglq.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fdgq23tobej30fs03m74n.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdgq4o44sjj30mg05k0ta.jpg">
<meta property="og:image" content="https://ww4.sinaimg.cn/large/006tNc79ly1fdgq7dgx89j30st098js0.jpg">
<meta property="og:image" content="https://ws4.sinaimg.cn/large/006tKfTcgy1fqhsdvxv35j31040kmtcr.jpg">
<meta property="og:image" content="https://ww2.sinaimg.cn/large/006tNc79ly1fdd7hrn1pjj304x010mx1.jpg">
<meta property="og:image" content="https://ww3.sinaimg.cn/large/006tNbRwly1fdd7jiejdqj30c700n3yd.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tNbRwly1fgcn2dowhnj30700j241h.jpg">
<meta property="og:image" content="https://ws3.sinaimg.cn/large/006tNbRwly1fgcn0lhrdtj3086060wf1.jpg">
<meta property="og:updated_time" content="2019-02-16T13:13:58.971Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录">
<meta name="twitter:description" content="最后更新时间：2018.4.18 最近在研究Unity导出的Xcode工程如何集成在现有工程中。现将过程中遇见的问题整理如下。">
<meta name="twitter:image" content="https://ww3.sinaimg.cn/large/006tNc79ly1fd8c4lh1l8j30mv01dt96.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'TRY8SX7BKP',
      apiKey: 'a65d0a4fbe7d5f1a35762a6898ea55f2',
      indexName: 'blog',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://willwei.me/2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/"/>





  <title> Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录 | 雷鸣的博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-98388090-1', 'auto');
  ga('send', 'pageview');
</script>


  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?d3a0b0e1b89bd5aee64e8645cf88c810";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  <script type="text/javascript">
    (function() {
      var hm = document.createElement("script");
      hm.src = "//tajs.qq.com/stats?sId=61961707";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



<script>
  	var _mtac = {};
  	(function() {
  		var mta = document.createElement("script");
  		mta.src = "http://pingjs.qq.com/h5/stats.js?v2.0.2";
  		mta.setAttribute("name", "MTAH5");
  		mta.setAttribute("sid", "500449825");

  		var s = document.getElementsByTagName("script")[0];
  		s.parentNode.insertBefore(mta, s);
  	})();
</script>






  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">雷鸣的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">生有涯，知无涯</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://willwei.me/2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Leiming">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="雷鸣的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-02T11:23:02+00:00">
                2017-03-02
              </time>
            

            

            
          </span>

          

          
            
            <!--noindex-->
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count hc-comment-count" data-xid="2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/" itemprop="commentsCount"></span>
                </a>
              </span>
              <!--/noindex-->
            
          

          
          
             <span id="/2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/" class="leancloud_visitors" data-flag-title="Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>最后更新时间：2018.4.18</p>
<p>最近在研究Unity导出的Xcode工程如何集成在现有工程中。现将过程中遇见的问题整理如下。</p>
<a id="more"></a>
<h1 id="Unity导出Xcode工程编译错误"><a href="#Unity导出Xcode工程编译错误" class="headerlink" title="Unity导出Xcode工程编译错误"></a>Unity导出Xcode工程编译错误</h1><ol>
<li><p>MapFileParser.sh: Permission denied</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fd8c4lh1l8j30mv01dt96.jpg" alt="ADB6928C-7EF7-4469-8CEC-856B504A63B3"></p>
<p>打开终端，进入<code>MapFileParser.sh</code>所在目录，执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod 777 MapFileParser.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>推送警告</p>
<p><img src="http://ww4.sinaimg.cn/large/006tKfTcly1ff1c19i81gj30n2014t93.jpg" alt="E432AF53-86D7-44A7-9649-F262E3EBC351"></p>
<p>解决方法Capablilties-&gt;Background Modes-&gt;Remote notifications</p>
<p><img src="http://ww4.sinaimg.cn/large/006tKfTcly1ff1bzgczroj30o40afta7.jpg" alt="75BDC5C5-7DC9-4CB4-A55C-1959E7198C10"></p>
</li>
</ol>
<h1 id="Unity导出Xcode工程集成进原生Xcode工程"><a href="#Unity导出Xcode工程集成进原生Xcode工程" class="headerlink" title="Unity导出Xcode工程集成进原生Xcode工程"></a>Unity导出Xcode工程集成进原生Xcode工程</h1><h2 id="集成步骤"><a href="#集成步骤" class="headerlink" title="集成步骤"></a>集成步骤</h2><h3 id="Unity导出Xcode工程"><a href="#Unity导出Xcode工程" class="headerlink" title="Unity导出Xcode工程"></a>Unity导出Xcode工程</h3><p>在iOS的<strong>Player Setting</strong>中进行设置</p>
<ul>
<li><p>Resolution and Presentation</p>
<p>根据项目需要设定，需要注意的是Orientation方向必须是原生工程Orientation方向的子集</p>
</li>
<li><p>Other Settings</p>
<ul>
<li>消掉Auto Graphics API，Graphics APIs列表中只留OpenGLES2</li>
<li>Scripting Backend选择IL2CPP</li>
<li>Bundle Identifier、Target Device、Target minimum iOS Version根据原生工程设置</li>
</ul>
</li>
</ul>
<p>这是我导出来的工程目录，设备只选择了iPhone</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgmwn9tqhj305c06ljrq.jpg" alt="111"></p>
<h3 id="集成工程"><a href="#集成工程" class="headerlink" title="集成工程"></a>集成工程</h3><blockquote>
<p><strong>注意：</strong>Build Setting和Build Phases中的设置均是根据Unity_Xcode中设置得到的，集成的时候对照两个工程的设置集成，这里只是一个例子</p>
</blockquote>
<ul>
<li>我在原生工程目录下新建了一个Unity文件夹来放置从Unity_Xcode工程中拷贝过来需要使用的文件</li>
</ul>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdgmyx5urlj30gu06pjs1.jpg" alt="222"></p>
<ul>
<li><p>将文件添加进工程目录</p>
<p>将Classes、Libraries、MapFileParser.sh添加进工程目录</p>
</li>
</ul>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdgogg7fsij30l80cw752.jpg" alt="333"></p>
<p>​    将Data添加进工程目录</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgoft719rj30l80cwaau.jpg" alt="444"></p>
<p>​    注意这两种不同的添加形式</p>
<ul>
<li><p>添加framework</p>
<p>根据自己导出的Unity_Xcode工程添加</p>
</li>
</ul>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdgoxk1oncj30nj0daabs.jpg" alt="555"></p>
<ul>
<li><p>Build Settings</p>
<p>设置Header Search Paths</p>
</li>
</ul>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdgp5v2yb8j30jj0660th.jpg" alt="111"></p>
<p>​    设置Library Search Paths</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1fdgphvrzdij30jj067mxq.jpg" alt="444"></p>
<p>​    设置Other Linker Flags</p>
<p>​    这里顺序保持一致</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdgplwi962j30j30670t2.jpg" alt="333"></p>
<p>​    设置Other C Flags &amp; Other C++ Flags</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpqzi4a9j30jj067dg5.jpg" alt="222"></p>
<p>​    设置C Language Dialect，在 <code>2017.3.1f1</code> 测试不更改，使用 <code>GNU99</code> 依然可用</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpsr63j4j30eq00ldfq.jpg" alt="222"></p>
<p>​    设置C++ Language Dialect，，在 <code>2017.3.1f1</code> 测试不更改，使用 <code>GNU++11</code> 依然可用</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgptuhwqkj30e700ngli.jpg" alt="222"></p>
<p>​    设置C++ Standard Library</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1fdgpuvg8h4j30j000pmx5.jpg" alt="222"></p>
<p>​    设置Enable Bitcode</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpvqt66yj30c200m0sl.jpg" alt="222"></p>
<p>​    Add User-Defined Setting</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgpypkbzrj30fy01vglq.jpg" alt="222"></p>
<p>​    添加GCC_THUMB_SUPPORT</p>
<p>​    添加GCC_USE_INDIRECT_FUNCTION_CALLS</p>
<p>​    添加UNITY_RUNTIME_VERSION。此项根据Unity导出的版本填写。</p>
<p>​    添加UNITY_SCRIPTING_BACKEND</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1fdgq23tobej30fs03m74n.jpg" alt="222"></p>
<ul>
<li><p>Build Phases</p>
<p>添加Run Script</p>
</li>
</ul>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdgq4o44sjj30mg05k0ta.jpg" alt="222"></p>
<p>​    添加”$PROJECT_DIR/iOS_Unity_Test01/Unity/MapFileParser.sh”</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1fdgq7dgx89j30st098js0.jpg" alt="222"></p>
<ul>
<li>新建PCH文件，命名为PrefixHeader。将Classes中的Prefix.pch文件的内容全部拷贝到Supporting Files中的PrefixHeader.pch中，并删除Classes中的Prefix.pch文件引用</li>
<li>将Classes/main.mm全部内容复制到main.m并把扩展名改为.mm，然后删除Classes/main.mm文件引用，注意红色框圈住的修改细节</li>
</ul>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1fqhsdvxv35j31040kmtcr.jpg" alt="image-20180419110553779"></p>
<ul>
<li><p>修改UnityAppController.h</p>
<blockquote>
<p><strong>注意</strong>：我当前用的 <code>2017.3.1f1</code> 版本这里已经不需要更改了，可忽略</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#import &quot;AppDelegate.h&quot;</span><br><span class="line">inline UnityAppController*	GetAppController()</span><br><span class="line">&#123;</span><br><span class="line">    return (UnityAppController *)[[UIApplication sharedApplication] valueForKeyPath:@&quot;delegate.unityController&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改AppDelegate.h</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;UIKit/UIKit.h&gt;</span><br><span class="line">#import &quot;UnityAppController.h&quot;</span><br><span class="line"></span><br><span class="line">@interface AppDelegate : UIResponder &lt;UIApplicationDelegate&gt;</span><br><span class="line"></span><br><span class="line">@property (strong, nonatomic) UIWindow *window;</span><br><span class="line">@property (strong, nonatomic) UIWindow *unityWindow;</span><br><span class="line"></span><br><span class="line">- (void)showUnityWindow;</span><br><span class="line">- (void)hideUnityWindow;</span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<ul>
<li>修改AppDelegate.m</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">@implementation AppDelegate</span><br><span class="line"></span><br><span class="line">- (UIWindow *)unityWindow &#123;</span><br><span class="line">    return UnityGetMainWindow();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)showUnityWindow &#123;</span><br><span class="line">    [self.unityWindow makeKeyAndVisible];</span><br><span class="line">  	UnityPause(false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)hideUnityWindow &#123;</span><br><span class="line">  	UnityPause(true);</span><br><span class="line">    [self.window makeKeyAndVisible];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    // Override point for customization after application launch.</span><br><span class="line">    </span><br><span class="line">    _UnityAppController = [[UnityAppController alloc] init];</span><br><span class="line">    [_UnityAppController application:application didFinishLaunchingWithOptions:launchOptions];</span><br><span class="line">    </span><br><span class="line">    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];</span><br><span class="line">    TestViewController *vc = [[TestViewController alloc] init];</span><br><span class="line">    self.window.rootViewController = vc;</span><br><span class="line">    [self.window makeKeyAndVisible];</span><br><span class="line">    </span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)applicationWillResignActive:(UIApplication *)application &#123;</span><br><span class="line">    // Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.</span><br><span class="line">    // Use this method to pause ongoing tasks, disable timers, and invalidate graphics rendering callbacks. Games should use this method to pause the game.</span><br><span class="line">    [_UnityAppController applicationWillResignActive:application];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)applicationDidEnterBackground:(UIApplication *)application &#123;</span><br><span class="line">    // Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later.</span><br><span class="line">    // If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.</span><br><span class="line">    [_UnityAppController applicationDidEnterBackground:application];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)applicationWillEnterForeground:(UIApplication *)application &#123;</span><br><span class="line">    // Called as part of the transition from the background to the active state; here you can undo many of the changes made on entering the background.</span><br><span class="line">    [_UnityAppController applicationWillEnterForeground:application];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)applicationDidBecomeActive:(UIApplication *)application &#123;</span><br><span class="line">    // Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.</span><br><span class="line">    [_UnityAppController applicationDidBecomeActive:application];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (void)applicationWillTerminate:(UIApplication *)application &#123;</span><br><span class="line">    // Called when the application is about to terminate. Save data if appropriate. See also applicationDidEnterBackground:.</span><br><span class="line">    [_UnityAppController applicationWillTerminate:application];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<h2 id="集成过程中遇见的一些问题"><a href="#集成过程中遇见的一些问题" class="headerlink" title="集成过程中遇见的一些问题"></a>集成过程中遇见的一些问题</h2><ol>
<li><p>编译完成出现许多<code>Code will never be executed</code>的警告⚠️</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1fdd7hrn1pjj304x010mx1.jpg" alt="111"></p>
<p>解决方法：在<code>Build Settings</code>中将<code>Unreachable Code</code>设置为<strong>No</strong>可以消除警告</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNbRwly1fdd7jiejdqj30c700n3yd.jpg" alt="222"></p>
</li>
<li><p>编译出现<code>Expected unqualified-id</code>错误</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwly1fgcn2dowhnj30700j241h.jpg" alt="9D5AA7E6-1800-4904-9E7A-E268547875CB"></p>
<p>解决方法：在PrefixHeader.pch文件中，将自己的头文件全部放入<code>#ifdef __OBJC__</code>中，如下：</p>
<p><img src="https://ws3.sinaimg.cn/large/006tNbRwly1fgcn0lhrdtj3086060wf1.jpg" alt="177BB71A-B8E2-4DC9-B155-2EADFF2C9E2D"></p>
</li>
<li><p>编译出现 <code>Control reaches end of non-void function</code> 错误</p>
<p>解决方法：在 <code>Build Settings</code> 中将 <code>Mismatched Return Type</code> 设置为 <strong>Yes</strong> 可以消除</p>
</li>
</ol>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a href="https://docs.unity3d.com/Manual/class-PlayerSettingsiOS.html" target="_blank" rel="noopener">iOS Player Settings</a></p>
<p><a href="http://www.jianshu.com/p/49fffc543140" target="_blank" rel="noopener">Unity3D工程并入iOS工程总结</a></p>
<p><a href="http://www.jianshu.com/p/f98bcfe09dc7" target="_blank" rel="noopener">unity3D与iOS原生工程项目合并以及合并过程中的问题</a></p>
<p><a href="http://blog.csdn.net/dylan_lwb_/article/details/51452470" target="_blank" rel="noopener">iOS - 将Unity导出的Xcode工程导入到另一个Xcode项目, 及常见报错的解决方法</a></p>
<p><a href="http://www.jianshu.com/p/487015f3bb13" target="_blank" rel="noopener">将U3d工程嵌入iOS工程中</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        
  <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
    <div></div>
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
      <span>赏</span>
    </button>
    <div id="QR" style="display: none;">
      
        <div id="wechat" style="display: inline-block">
          <img id="wechat_qr" src="/uploads/wechat_pay.jpg" alt="Leiming WeChat Pay"/>
          <p>微信打赏</p>
        </div>
      
      
        <div id="alipay" style="display: inline-block">
          <img id="alipay_qr" src="/uploads/alipay_pay.jpg" alt="Leiming Alipay"/>
          <p>支付宝打赏</p>
        </div>
      
    </div>
  </div>


      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"># iOS</a>
          
            <a href="/tags/Unity/" rel="tag"># Unity</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/03/01/对未来职业方向的一些想法/" rel="next" title="对未来职业方向的一些想法">
                <i class="fa fa-chevron-left"></i> 对未来职业方向的一些想法
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/03/09/使用Hexo搭建个人博客/" rel="prev" title="使用Hexo搭建个人博客">
                使用Hexo搭建个人博客 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="hypercomments_widget"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Leiming" />
          <p class="site-author-name" itemprop="name">Leiming</p>
           
              <p class="site-description motion-element" itemprop="description">iOS/U3D developer.</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">43</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">18</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/WeiLeiming" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://shiviy.github.io/" title="Leo's Blog" target="_blank">Leo's Blog</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Unity导出Xcode工程编译错误"><span class="nav-number">1.</span> <span class="nav-text">Unity导出Xcode工程编译错误</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Unity导出Xcode工程集成进原生Xcode工程"><span class="nav-number">2.</span> <span class="nav-text">Unity导出Xcode工程集成进原生Xcode工程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#集成步骤"><span class="nav-number">2.1.</span> <span class="nav-text">集成步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Unity导出Xcode工程"><span class="nav-number">2.1.1.</span> <span class="nav-text">Unity导出Xcode工程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#集成工程"><span class="nav-number">2.1.2.</span> <span class="nav-text">集成工程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#集成过程中遇见的一些问题"><span class="nav-number">2.2.</span> <span class="nav-text">集成过程中遇见的一些问题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考资料"><span class="nav-number">3.</span> <span class="nav-text">参考资料</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2016 - 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Leiming</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  





  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	

		<script type="text/javascript">
		_hcwp = window._hcwp || [];

		_hcwp.push({widget:"Bloggerstream", widget_id: 90380, selector:".hc-comment-count", label: "{\%COUNT%\}" });

		
		_hcwp.push({widget:"Stream", widget_id: 90380, xid: "2017/03/02/Unity导出Xcode工程集成进另一个原生Xcode工程,错误及解决方法记录/"});
		

		(function() {
		if("HC_LOAD_INIT" in window)return;
		HC_LOAD_INIT = true;
		var lang = (navigator.language || navigator.systemLanguage || navigator.userLanguage || "en").substr(0, 2).toLowerCase();
		var hcc = document.createElement("script"); hcc.type = "text/javascript"; hcc.async = true;
		hcc.src = ("https:" == document.location.protocol ? "https" : "http")+"://w.hypercomments.com/widget/hc/90380/"+lang+"/widget.js";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hcc, s.nextSibling);
		})();
		</script>

	












  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.0"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("8RMgxQVBABdzp2Xkb2Jzft92-gzGzoHsz", "oE9CfaGrfzm9hGzXWt3Ti2FG");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

</body>
</html>
